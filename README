This is readme file of Streaming Spring Project.


### How to run
1. First start dirty zookeeper comes with kafka or download and start zookeeper.
    <KAFKA_HOME>/bin/zookeeper-server-start.sh config/zookeeper.properties  ==> will start zookeeper comes with kafka.
2. Start Kafka broker, following command start kafka server on port 9092 if you use default port,
 and it bind to all network interfaces unless you configure host.
    <KAFKA_HOME>/bin/kafka-server-start.sh config/server.properties

3. Run Kafka streaming producer by invoking startKafkaProducer method
 in org.streaming.spring.Bootstrap class.

4. Run following command to start console consumer to test kafka twitter stream producer code.
    <KAFKA_HOME>/bin/kafka-console-consumer.sh --zookeeper localhost:2181 --from-beginning --topic test

5. org.streaming.spring.storm.TPBuilder build different topology, eg: wordCountTopology

6. org.streaming.spring.storm.SpoutProvider provide different spout implemenations, eg: kafka Spout , rabbitmq spout.


## Kafka Specific
set kafka retention.ms -> ./bin/kafka-topics.sh --zookeeper localhost:2181 --alter --topic test --config retention.ms=1000
remove kafka retention.ms -> ./bin/kafka-topics.sh --zookeeper localhost:2181 --alter --topic test --delete-config retention.ms

./bin/kafka-topics.sh --zookeeper j-051:2181,j-052:2181,j-053:2181 --describe --topic test
./bin/kafka-topics.sh --zookeeper j-051:2181,j-052:2181,j-053:2181 --alter --topic test replication-factor 2
./bin/kafka-topics.sh --zookeeper j-051:2181,j-052:2181,j-053:2181 --alter --topic test partitions 3
./bin/kafka-topics.sh --zookeeper j-051:2181,j-052:2181,j-053:2181 --create --topic test --partitions 3 --replication-factor 2
./bin/kafka-topics.sh --zookeeper j-051:2181,j-052:2181,j-053:2181 --delete --topic test

Additional details,
Storm-kafka spout = https://github.com/apache/storm/tree/master/external/storm-kafka
Storm-rabbitmq spout = https://github.com/ppat/storm-rabbitmq

dataset = http://labrosa.ee.columbia.edu/millionsong/
http://www.gutenberg.org/wiki/Gutenberg:Information_About_Robot_Access_to_our_Pages






#Cluster guide.
Kafka cluster

Zookeeper Cluster


Storm Cluster.


#RabbitMQ Cluster.
sudo service rabbitmq-server start
sudo service rabbitmq-server stop
sudo -u rabbitmq /usr/sbin/rabbitmqctl status
sudo -u rabbitmq /usr/sbin/rabbitmqctl start_app
sudo -u rabbitmq /usr/sbin/rabbitmqctl stop_app
sudo -u rabbitmq /usr/sbin/rabbitmqctl cluster_status
sudo -u rabbitmq /usr/sbin/rabbitmqctl join_cluster rabbit@rabbit1
sudo -u rabbitmq /usr/sbin/rabbitmqctl reset
sudo -u rabbitmq /usr/sbin/rabbitmqctl forget_cluster_node rabbit@rabbit1